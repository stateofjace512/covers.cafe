---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Settings" description="covers.cafe settings">
  <h1 class="section-title">
    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16z"/><path d="M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>
    Settings
  </h1>

  <div class="settings-layout">
    <!-- Appearance -->
    <section class="card settings-section">
      <h2 class="settings-section-title">Appearance</h2>
      <div class="settings-row">
        <div class="settings-row-info">
          <span class="settings-row-label">Theme</span>
          <span class="settings-row-desc">Choose between light and dark mode for the interface.</span>
        </div>
        <div class="settings-row-control">
          <button class="btn btn-secondary settings-theme-light" id="theme-light">Light</button>
          <button class="btn btn-secondary settings-theme-dark" id="theme-dark">Dark</button>
        </div>
      </div>
      <hr class="divider" />
      <div class="settings-row">
        <div class="settings-row-info">
          <span class="settings-row-label">Grid Size</span>
          <span class="settings-row-desc">Number of columns in the gallery grid.</span>
        </div>
        <div class="settings-row-control">
          <select class="settings-select" disabled>
            <option>Auto (default)</option>
            <option>Small (6 cols)</option>
            <option>Medium (4 cols)</option>
            <option>Large (3 cols)</option>
          </select>
        </div>
      </div>
    </section>

    <!-- Account -->
    <section class="card settings-section">
      <h2 class="settings-section-title">Account</h2>
      <div class="settings-row">
        <div class="settings-row-info">
          <span class="settings-row-label">Sign in / Register</span>
          <span class="settings-row-desc">Create an account to upload covers and save favorites.</span>
        </div>
        <div class="settings-row-control">
          <a href="/login" class="btn btn-primary">Sign In</a>
        </div>
      </div>
    </section>

    <!-- About -->
    <section class="card settings-section">
      <h2 class="settings-section-title">About</h2>
      <div class="settings-kv">
        <span class="settings-kv-key">Version</span>
        <span class="settings-kv-val">0.1.0</span>
      </div>
      <div class="settings-kv">
        <span class="settings-kv-key">Built with</span>
        <span class="settings-kv-val">Astro + React</span>
      </div>
    </section>
  </div>
</Layout>

<script>
  const lightBtn = document.getElementById('theme-light');
  const darkBtn = document.getElementById('theme-dark');

  function syncButtons() {
    const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
    lightBtn?.classList.toggle('btn-primary', !isDark);
    lightBtn?.classList.toggle('btn-secondary', isDark);
    darkBtn?.classList.toggle('btn-primary', isDark);
    darkBtn?.classList.toggle('btn-secondary', !isDark);
  }

  syncButtons();

  lightBtn?.addEventListener('click', () => {
    document.documentElement.setAttribute('data-theme', 'light');
    localStorage.setItem('theme', 'light');
    syncButtons();
  });

  darkBtn?.addEventListener('click', () => {
    document.documentElement.setAttribute('data-theme', 'dark');
    localStorage.setItem('theme', 'dark');
    syncButtons();
  });
</script>

<style>
  .settings-layout {
    display: flex;
    flex-direction: column;
    gap: 20px;
    max-width: 600px;
  }

  .settings-section { padding: 20px 22px; }

  .settings-section-title {
    font-size: 15px;
    font-weight: bold;
    color: var(--body-text);
    text-shadow: 0 1px 0 rgba(255,255,255,0.4);
    margin-bottom: 16px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--body-border);
  }

  [data-theme="dark"] .settings-section-title { text-shadow: none; }

  .settings-row {
    display: flex;
    align-items: center;
    gap: 16px;
    justify-content: space-between;
    flex-wrap: wrap;
  }

  .settings-row-info {
    display: flex;
    flex-direction: column;
    gap: 3px;
    flex: 1;
    min-width: 180px;
  }

  .settings-row-label {
    font-size: 13px;
    font-weight: bold;
    color: var(--body-text);
  }

  .settings-row-desc {
    font-size: 12px;
    color: var(--body-text-muted);
    line-height: 1.5;
  }

  .settings-row-control {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-shrink: 0;
  }

  .settings-select {
    padding: 7px 10px;
    border-radius: 4px;
    border: 1px solid var(--body-card-border);
    background: var(--body-card-bg);
    color: var(--body-text);
    font-size: 13px;
    box-shadow: var(--shadow-inset-sm);
    font-family: Arial, Helvetica, sans-serif;
  }

  /* Key-value rows */
  .settings-kv {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 6px 0;
    font-size: 13px;
  }

  .settings-kv-key {
    font-weight: bold;
    color: var(--body-text-muted);
    min-width: 100px;
  }

  .settings-kv-val {
    color: var(--body-text);
  }
</style>

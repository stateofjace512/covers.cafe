---
import '../styles/global.css';
import App from '../App';
const logoUrl = `/cover_cafe_logo.svg`;
const siteUrl = 'https://covers.cafe';
const pageTitle = 'covers.cafe - Album Cover Art Gallery';
const pageDescription = 'Discover, upload, and download high-quality album cover art. Browse thousands of covers from your favorite artists and albums.';
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>{pageTitle}</title>
    <meta name="description" content={pageDescription} />
    <link rel="canonical" href={siteUrl} />
    <link rel="icon" type="image/svg+xml" href={logoUrl} />

    <!-- Open Graph -->
    <meta property="og:site_name" content="covers.cafe" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content={siteUrl} />
    <meta property="og:title" content={pageTitle} />
    <meta property="og:description" content={pageDescription} />

    <!-- Twitter / X Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content={pageTitle} />
    <meta name="twitter:description" content={pageDescription} />

    <!-- Prevent flash of wrong theme -->
    <script is:inline>
      (function () {
        var t = localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        var noThemeImages = localStorage.getItem('pref_no_theme_images') === '1';
        var gridMinWidth = parseInt(localStorage.getItem('pref_cover_grid_min_width') || '160', 10);
        if (!isFinite(gridMinWidth)) gridMinWidth = 160;
        document.documentElement.setAttribute('data-theme', t);
        document.documentElement.setAttribute('data-no-theme-images', noThemeImages ? 'true' : 'false');
        document.documentElement.style.setProperty('--cover-grid-min-width', gridMinWidth + 'px');
      })();
    </script>
    <!-- Prefetch skeuomorphic theme images immediately so they are ready when rendered -->
    <script is:inline>
      (function () {
        if (localStorage.getItem('pref_no_theme_images') === '1') return;
        var imgs = [
          '/themes/themedark/hero-banner_dark-mode.jpg',
          '/themes/themedark/album-card-info_dark-mode.jpg',
          '/themes/themedark/btn btn-primary_dark-mode.jpg',
          '/themes/themelight/hero-banner_light-mode.jpg',
          '/themes/themelight/album-card-info_light-mode.jpg',
          '/themes/themelight/btn btn-primary_light-mode.jpg'
        ];
        for (var i = 0; i < imgs.length; i++) {
          var el = new Image();
          el.src = imgs[i];
        }
      })();
    </script>
  </head>
  <body>
    <App client:only="react" />
  </body>
</html>
